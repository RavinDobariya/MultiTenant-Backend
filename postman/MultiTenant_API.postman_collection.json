{
  "info": {
    "_postman_id": "c8a60e99-b1ea-4d93-a1f0-939fd8cca123",
    "name": "Multi-Tenant Doc Project",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "41733340"
  },
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "Health",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var template = `",
                  "<canvas id=\"myChart\" height=\"75\"></canvas>",
                  "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js\"></script>",
                  "<script>",
                  "    var ctx = document.getElementById(\"myChart\");",
                  "    var myChart = new Chart(ctx, {",
                  "        type: \"bar\",",
                  "        data: {",
                  "            labels: [\"ok\"],",
                  "            datasets: [{",
                  "                label: \"Health Status\",",
                  "                data: [],",
                  "                backgroundColor: \"rgba(75, 192, 192, 0.6)\",",
                  "                borderColor: \"rgba(75, 192, 192, 1)\",",
                  "                borderWidth: 1",
                  "            }]",
                  "        },",
                  "        options: {",
                  "            legend: { display: true },",
                  "            title: {",
                  "                display: true,",
                  "                text: \"Health Check Result\"",
                  "            },",
                  "            scales: {",
                  "                yAxes: [{",
                  "                    display: true,",
                  "                    ticks: {",
                  "                        beginAtZero: true",
                  "                    },",
                  "                    scaleLabel: {",
                  "                        display: true,",
                  "                        labelString: \"Value\"",
                  "                    }",
                  "                }]",
                  "            }",
                  "        }",
                  "    });",
                  "",
                  "    pm.getData(function (err, value) {",
                  "        myChart.data.datasets[0].data = [value.response.data.ok];",
                  "        myChart.update();",
                  "    });",
                  "</script>`;",
                  "",
                  "function constructVisualizerPayload() {",
                  "    return { response: pm.response.json() };",
                  "}",
                  "",
                  "pm.visualizer.set(template, constructVisualizerPayload());"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health\n",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health\n"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Signup",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"ravin2481@gmail.com\",\n  \"password\": \"1234\",\n  \"role\": \"admin\",\n  \"company_id\": \"C01\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/signup",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "signup"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"ravin2481@gmail.com\",\n  \"password\": \"1234\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Refresh",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh_token\": \"_1zcrtpcv2LueZeE3F4BVZmscpSg9MwR65UNH5K_fJM\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "refresh"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiMWIxMDAwNjktODA1Mi00ZDlkLTg4MzItNzg3YmZkYWUwMTUyIiwiZW1haWwiOiJyYXZpbjI0ODFAZ21haWwuY29tIiwicm9sZSI6ImFkbWluIiwiY29tcGFueV9pZCI6IkMwMSIsImV4cCI6MTc2OTE2MjkyNH0.u9FHuJiFSz2caNnt0NHOCZ6RWGmune9ASfRV3E8fkW4",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "/*\naccess token in Authorization\n*/"
            },
            "url": {
              "raw": "{{baseUrl}}/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "logout"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Auth Me",
      "item": [
        {
          "name": "Auth me",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"harsh@gmail.com\",\n  \"password\": \"1234\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "me"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Auth Admin",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/admin",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "admin"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Companies",
      "item": [
        {
          "name": "List Companies",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/companies",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "companies"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Company",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"KIM DOKJA COMPANY\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/companies",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "companies"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Company",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"company name update11\"\n}\n"
            },
            "url": {
              "raw": "{{baseUrl}}/companies/:company_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "companies",
                ":company_id"
              ],
              "variable": [
                {
                  "key": "company_id",
                  "value": "C01"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Units",
      "item": [
        {
          "name": "List Units",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/units",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "units"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Unit",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"unit got unit\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/units",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "units"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Company Name",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"unit got unit2\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/update/:unit_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "update",
                ":unit_id"
              ],
              "variable": [
                {
                  "key": "unit_id",
                  "value": "185cd63a-d667-401f-87c8-1d2e20189e96"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Archive Unit",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "/*\nunit_id provide\n*/"
            },
            "url": {
              "raw": "{{baseUrl}}/:unit_id/archive",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                ":unit_id",
                "archive"
              ],
              "variable": [
                {
                  "key": "unit_id",
                  "value": "U01"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Unarchive Unit",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "/*\nunit_id provide\n*/"
            },
            "url": {
              "raw": "{{baseUrl}}/:unit_id/unarchive",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                ":unit_id",
                "unarchive"
              ],
              "variable": [
                {
                  "key": "unit_id",
                  "value": "U01"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Documents",
      "item": [
        {
          "name": "List Documents",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "/*\nfetch all docs\n*/"
            },
            "url": {
              "raw": "{{baseUrl}}/documents?page=1&limit=10&status=DRAFT&type=POLICY&sort_by=status&sort_order=desc",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "documents"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "unit_id",
                  "value": "U01",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "DRAFT"
                },
                {
                  "key": "type",
                  "value": "POLICY"
                },
                {
                  "key": "sort_by",
                  "value": "status"
                },
                {
                  "key": "sort_order",
                  "value": "desc"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Approve Docs",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/documents/:document_id/approve",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "documents",
                ":document_id",
                "approve"
              ],
              "variable": [
                {
                  "key": "document_id",
                  "value": "91fdf62a-220c-45f8-abcb-d9ea5b33a844"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Docs",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": []
            },
            "url": {
              "raw": "{{baseUrl}}/documents/:document_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "documents",
                ":document_id"
              ],
              "variable": [
                {
                  "key": "document_id",
                  "value": "eyJhbGciOiJIUzI1Jkr9dNTixbY"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Archive Docs",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"harsh@gmail.com\",\n  \"password\": \"1234\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/:document_id/archive",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                ":document_id",
                "archive"
              ],
              "variable": [
                {
                  "key": "document_id",
                  "value": "s"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Upload Docs",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/documents/upload/:document_id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "documents",
                "upload",
                ":document_id"
              ],
              "variable": [
                {
                  "key": "document_id",
                  "value": "4"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Docs",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"unit_id\": \"string\",\n  \"title\": \"string\",\n  \"description\": \"string\",              /*description: optional*/\n  \"type\": \"POLICY\"                      /*type: [\"POLICY\", \"MANUAL\", \"REPORT\"]*/\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/documents/create",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "documents",
                "create"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Audit-logs",
      "item": [
        {
          "name": "List Audit-logs",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "/*\nFetch audit-logs\n*/"
            },
            "url": {
              "raw": "{{baseUrl}}/audit-logs",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "audit-logs"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create Audit-logs",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"action\": \"Projet complete\",\r\n  \"entity_id\": \"U01\",\r\n  \"user_id\": \"1b100069-8052-4d9d-8832-787bfdae0152\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/audit-logs/create",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "audit-logs",
                "create"
              ]
            }
          },
          "response": []
        }
      ]
    }
  ]
}